export async function onRequestPost(context) {
  const { request } = context;
  const formData = await request.formData();
  
  const name = formData.get('name');
  const email = formData.get('email');
  const company = formData.get('company');
  const service = formData.get('service');
  const message = formData.get('message');
  
  await fetch('https://api.brevo.com/v3/smtp/email', {
    method: 'POST',
    headers: { 'content-type': 'application/json', 'api-key': xxx, 'accept': 'application/json' },
    body: JSON.stringify({ 
      "sender":{  
        "name":"Mossel Cloud Website",
        "email":"noreply@mossel.cloud"
      },
      "to":[  
        {  
          "email":"krijn@mossel.cloud",
          "name":"Krijn Mossel"
        }
      ],
      "subject":"Mossel Cloud Form Submission",
      "textContent":"Name: "+name+"\nEmail: "+email+"\nCompany: "+company+"\nService: "+"\nMessage: "+message
    })
  });
  
  return new Response(JSON.stringify({ success: true }), {
    headers: { 'Content-Type': 'application/json' }
  });
}
